@model PWANotesApp.Web.ViewModels.NoteDetailsViewModel

@{
    ViewData["Title"] = "Note";
}

<h2>@Model.Title<a asp-action="EditTitle" asp-route-id="@Model.Id" class="btn btn-light float-lg-right"><i class="fa fa-edit"></i></a></h2>
<hr />
<form id="frmNoteItems" asp-action="DeleteItem">
    @foreach (var item in Model.Items)
    {
        <div class="row">
            <div class="col-md-9">
                @if (item.Type == PWANotesApp.Web.Models.NoteItemType.Text)
                {
                    <p>@item.Content</p>
                }
            </div>
            <div class="col-md-3">
                <span class="float-md-right">
                    <a asp-action="NewTextItem" asp-route-id="@Model.Id" class="btn btn-light"><i class="fa fa-plus-circle"></i></a>
                    <span>&nbsp;</span>
                    <a asp-action="EditTextItem" asp-route-id="@item.Id" class="btn btn-light"><i class="fa fa-edit"></i></a>
                    <span>&nbsp;</span>
                    <a href="#" onclick="onDelete(@item.Id); return false;" class="btn btn-light"><i class="fa fa-trash-alt"></i></a>
                </span>
            </div>
        </div>

    }
</form>

@section Scripts
{
    <script>
        function onDelete(id) {
            var result = confirm("Are you sure you want to delete this item?");
            if (result) {
                var form = document.forms["frmNoteItems"];
                var hdInputId = document.createElement("input");

                hdInputId.value = id;
                hdInputId.name = "id";
                form.appendChild(hdInputId);

                document.body.appendChild(form);

                form.submit();
            }
        }
    </script>
}